(function(){"use strict";var t={3844:function(t,n,o){var r=o(5130),e=o(6768);const s={class:"container"},a={class:"row"},l={class:"col-12 m-auto"},u=(0,e.Lk)("h1",{class:"brand"},"Revenue Online Proof of Concept",-1),i=(0,e.Lk)("hr",null,null,-1),c=(0,e.Lk)("div",{class:"mb-4"},null,-1),d=(0,e.Lk)("div",{class:"mt-4"},null,-1),m=(0,e.Lk)("hr",null,null,-1),p=(0,e.Lk)("div",{class:"foot"},"Nick Rankin 2024.",-1);function f(t,n,o,r,f,h){const v=(0,e.g2)("LoginForm");return(0,e.uX)(),(0,e.CE)("div",s,[(0,e.Lk)("div",a,[(0,e.Lk)("div",l,[u,i,c,(0,e.bF)(v),d,m,p])])])}var h=o(4232);const v={key:0},k={class:"row"},b={class:"m-auto"},y={class:"col-6"},L={key:0,class:"alert alert-danger"},g=(0,e.Lk)("label",{for:"pps"},"PPS Number",-1),x=(0,e.Lk)("label",{for:"password"},"Password",-1),w={key:1},F={class:"row"},R={class:"col-6"},P={class:"col-4"};function T(t,n,o,s,a,l){const u=(0,e.g2)("DashBoard");return null==this.user?((0,e.uX)(),(0,e.CE)("div",v,[(0,e.Lk)("div",k,[(0,e.Lk)("div",b,[(0,e.Lk)("div",y,[""!=this.error?((0,e.uX)(),(0,e.CE)("div",L,"An error occurred! "+(0,h.v_)(this.error),1)):(0,e.Q3)("",!0),g,(0,e.bo)((0,e.Lk)("input",{type:"text",name:"pps",id:"pps","onUpdate:modelValue":n[0]||(n[0]=n=>t.pps_no=n),class:"form-control m-2"},null,512),[[r.Jo,t.pps_no]]),x,(0,e.bo)((0,e.Lk)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":n[1]||(n[1]=n=>t.pin=n),class:"form-control m-2"},null,512),[[r.Jo,t.pin]]),(0,e.Lk)("a",{href:"#",class:"btn btn-primary m-2",onClick:n[2]||(n[2]=t=>l.doLogin())},"Login")])])])])):((0,e.uX)(),(0,e.CE)("div",w,[(0,e.Lk)("div",F,[(0,e.Lk)("div",R,[(0,e.Lk)("h4",null,"Thank you for logging in, "+(0,h.v_)(this.user.name)+"!",1)]),(0,e.Lk)("div",P,[(0,e.Lk)("a",{href:"#",class:"btn btn-danger",onClick:n[3]||(n[3]=t=>l.logout())},"Logoff")])]),(0,e.bF)(u,{user:this.user},null,8,["user"])]))}const C={key:0},E={class:"col-4"},O=(0,e.Lk)("label",{for:"form",class:"form-label"},"Select a Form and year:",-1),_={class:"input-group mb-3"},j=(0,e.Lk)("option",{disabled:"",value:""},"Please select one",-1),S=["value"],X=(0,e.Lk)("label",{for:"totalTaxPaid",class:"form-label"},"Total payment",-1),N={class:"input-group mb-3"},A=(0,e.Lk)("span",{class:"input-group-text"},"€",-1);function M(t,n,o,s,a,l){const u=(0,e.g2)("MyReturns");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.Lk)("div",null,[(0,e.Lk)("a",{href:"#",class:"btn btn-success m-4",onClick:n[0]||(n[0]=t=>this.toggleForm())},"Submit New Return"),this.showForm?((0,e.uX)(),(0,e.CE)("div",C,[(0,e.Lk)("div",E,[(0,e.Lk)("form",null,[O,(0,e.Lk)("div",_,[(0,e.bo)((0,e.Lk)("select",{name:"form",id:"form",class:"form-control m-4","onUpdate:modelValue":n[1]||(n[1]=t=>a.selectedForm=t)},[j,((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(this.forms,(t=>((0,e.uX)(),(0,e.CE)("option",{value:{name:t.name,year:t.year}},(0,h.v_)(t.name)+" - Year End "+(0,h.v_)(t.year),9,S)))),256))],512),[[r.u1,a.selectedForm]])]),X,(0,e.Lk)("div",N,[A,(0,e.bo)((0,e.Lk)("input",{type:"text",name:"totalTaxPayed",id:"totalTaxPayed",class:"form-control","onUpdate:modelValue":n[2]||(n[2]=t=>a.totalTaxPayed=t)},null,512),[[r.Jo,a.totalTaxPayed]])]),(0,e.Lk)("a",{onClick:n[3]||(n[3]=t=>l.submitTaxForm()),class:"btn btn-primary m-3"},"Submit Return")])])])):(0,e.Q3)("",!0),(0,e.bF)(u,{taxReturns:this.taxReturns},null,8,["taxReturns"])])])}o(4114);const J=(0,e.Lk)("div",{class:"m-4"},null,-1),U=(0,e.Lk)("h3",null,"My completed returns",-1),V={class:"col-10 m-auto"};function Y(t,n,o,r,s,a){const l=(0,e.g2)("TaxReturn");return(0,e.uX)(),(0,e.CE)("div",null,[J,U,(0,e.Lk)("div",V,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(o.taxReturns,(t=>((0,e.uX)(),(0,e.CE)("div",null,[(0,e.bF)(l,{taxReturn:t},null,8,["taxReturn"])])))),256))])])}const $={class:"col-4 m-auto"},D={class:"card m-3"},I={class:"card-title"},B={class:"card-body"},K={class:"card-text"};function Q(t,n,o,r,s,a){return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.Lk)("div",$,[(0,e.Lk)("div",D,[(0,e.Lk)("h5",I,(0,h.v_)(o.taxReturn.form)+" - "+(0,h.v_)(o.taxReturn.returnYear),1),(0,e.Lk)("div",B,[(0,e.Lk)("p",K," You submitted "+(0,h.v_)(o.taxReturn.taxPayed)+"€ ",1)])])])])}var G={props:["taxReturn"]},q=o(1241);const z=(0,q.A)(G,[["render",Q]]);var H=z,W={data(){return{}},components:{TaxReturn:H},props:["taxReturns"]};const Z=(0,q.A)(W,[["render",Y]]);var tt=Z,nt={data(){return{forms:null,taxReturns:null,showForm:!1,selectedForm:"",totalTaxPayed:0,formError:""}},components:{MyReturns:tt},props:["user"],methods:{toggleForm(){this.showForm?this.showForm=!1:this.showForm=!0},async getForms(){const t=fetch(this.$hostName+"/forms",{method:"GET"}),n=await t;200==n.status?(n.json().then((t=>this.forms=t)),this.formError=""):n.text().then((t=>this.formError=t))},async submitTaxForm(){const t={userId:this.user.id,form:this.selectedForm.name,returnYear:this.selectedForm.year,taxPayed:this.totalTaxPayed},n=fetch(this.$hostName+"/returns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await n;this.toggleForm(),200==o.status?(o.json().then((t=>this.taxReturns.push(t))),this.error=""):o.text().then((t=>this.error=t))}},mounted(){this.getForms(),this.taxReturns=this.user.returns}};const ot=(0,q.A)(nt,[["render",M]]);var rt=ot,et={data(){return{user:null,error:""}},components:{DashBoard:rt},methods:{async doLogin(){const t=new FormData;t.append("pps_no",this.pps_no),t.append("pin",this.pin);const n=fetch(this.$hostName+"/users/login",{method:"POST",body:t}),o=await n;200==o.status?(o.json().then((t=>this.user=t)),this.error=""):(o.text().then((t=>this.error=t)),this.user=null)},logout:function(){this.user=null}}};const st=(0,q.A)(et,[["render",T]]);var at=st,lt={name:"App",data(){return{}},components:{LoginForm:at},methods:{}};const ut=(0,q.A)(lt,[["render",f]]);var it=ut;o(8077);let ct=(0,r.Ef)(it);ct.config.globalProperties.$hostName=window.location.protocol+"//"+window.location.hostname+":"+window.location.port,ct.mount("#app")}},n={};function o(r){var e=n[r];if(void 0!==e)return e.exports;var s=n[r]={exports:{}};return t[r].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(n,r,e,s){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],e=t[c][1],s=t[c][2];for(var l=!0,u=0;u<r.length;u++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](r[u])}))?r.splice(u--,1):(l=!1,s<a&&(a=s));if(l){t.splice(c--,1);var i=e();void 0!==i&&(n=i)}}return n}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,e,s]}}(),function(){o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,{a:n}),n}}(),function(){o.d=function(t,n){for(var r in n)o.o(n,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};o.O.j=function(n){return 0===t[n]};var n=function(n,r){var e,s,a=r[0],l=r[1],u=r[2],i=0;if(a.some((function(n){return 0!==t[n]}))){for(e in l)o.o(l,e)&&(o.m[e]=l[e]);if(u)var c=u(o)}for(n&&n(r);i<a.length;i++)s=a[i],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(3844)}));r=o.O(r)})();
//# sourceMappingURL=app.48830c91.js.map